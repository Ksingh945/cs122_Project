{% extends 'base.html' %}
{% block title %}{{ ticker }} Data – Stock Explorer{% endblock %}

{% block content %}
  <h2 class="mb-4">Data for <span class="text-primary">{{ ticker }}</span></h2>

  <div class="row g-4">
    <!-- Price Chart -->
    <div class="col-md-6">
      <div class="card h-100 shadow-sm">
        <div class="card-header"><strong>Price Chart</strong> ({{ ma_window }}-Day MA)</div>
        <div class="card-body text-center">
          <img src="{{ plot_url }}" alt="Price chart" class="img-fluid rounded">
        </div>
      </div>
    </div>

    <!-- Daily Return Histogram -->
    <div class="col-md-6">
      <div class="card h-100 shadow-sm">
        <div class="card-header"><strong>Daily Return Distribution</strong></div>
        <div class="card-body text-center">
          <img src="{{ hist_url }}" alt="Return histogram" class="img-fluid rounded">
        </div>
      </div>
    </div>

    <!-- Volume Bar Chart -->
    <div class="col-md-6">
      <div class="card h-100 shadow-sm">
        <div class="card-header"><strong>Volume</strong></div>
        <div class="card-body text-center">
          <img src="{{ vol_url }}" alt="Volume chart" class="img-fluid rounded">
        </div>
      </div>
    </div>

    <!-- Bollinger Bands -->
    <div class="col-md-6">
      <div class="card h-100 shadow-sm">
        <div class="card-header"><strong>Bollinger Bands</strong> ({{ ma_window }}-Day)</div>
        <div class="card-body text-center">
          <img src="{{ bb_url }}" alt="Bollinger Bands" class="img-fluid rounded">
        </div>
      </div>
    </div>

    <!-- Recent Stock Data Table -->
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-header"><strong>Recent Stock Data</strong></div>
        <div class="card-body table-responsive">
          {% for table in tables %}
            {{ table | safe }}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4 text-end">
    <a href="{{ url_for('main.home') }}" class="btn btn-outline-secondary">← Back</a>
  </div>
{% endblock %}
